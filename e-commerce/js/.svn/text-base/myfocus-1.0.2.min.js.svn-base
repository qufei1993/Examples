/*
* myFocus JavaScript Library v1.0.2
* JS焦点图库 myFocus-1.0.2
* 
* 你可以免费任意使用，但请保留相关版权信息
* @Author  koen_lee@qq.com
* @Blog    http://hi.baidu.com/koen_li/
* 
* @Date    2010/12/07
*/
var myFocus={$:function(a){return document.getElementById(a)},$$:function(a,b){return(typeof b=='object'?b:this.$(b)).getElementsByTagName(a)},$$_:function(b,c){var d=[],n=0,a=c.getElementsByTagName(b);for(var i=0;i<a.length;i++){if(a[i].parentNode==c)d.push(a[i]);if(a[i].getElementsByTagName(b).length){n=a[i].getElementsByTagName(b).length}i=i+n;n=0}return d},$c:function(a,b){var c=b.getElementsByTagName('*'),a=a.replace(/\-/g,'\\-'),reg=new RegExp('(^|\\s)'+a+'(\\s|$)'),arr=[];for(var i=0,l=c.length;i<l;i++){if(reg.test(c[i].className)){arr.push(c[i]);break}}return arr[0]},$li:function(a,b){return this.$$_('li',this.$c(a,b))},linear:function(t,b,c,d){return c*t/d+b},easeIn:function(t,b,c,d){return c*(t/=d)*t*t*t+b},easeOut:function(t,b,c,d){return-c*((t=t/d-1)*t*t*t-1)+b},easeInOut:function(t,b,c,d){return((t/=d/2)<1)?(c/2*t*t*t*t+b):(-c/2*((t-=2)*t*t*t-2)+b)},style:function(a,b){return(+[1,])?window.getComputedStyle(a,null)[b]:a.currentStyle[b]},opacity:function(a,v){if(v!=undefined){v=v>100?100:(v<0?0:v);a.style.filter="alpha(opacity="+v+")";a.style.opacity=(v/100)}else return(!+[1,])?((a.filters.alpha)?a.filters.alpha.opacity:100):((a.style.opacity)?a.style.opacity*100:100)},animate:function(a,e,f,g,h,i){var j=e=='opacity'?true:false,os=this.style(a,e),am=typeof f==='string';if(j&&this.style(a,'display')=='none'){a.style.display='block';this.opacity(a,0)}var t=0,b=j?this.opacity(a):parseInt(os=='auto'?0:os),c=am?f/1:f-b,d=g||50,st=h||'easeOut',m=c>0?'ceil':'floor';if(a[e+'Timer'])clearInterval(a[e+'Timer']);a[e+'Timer']=setInterval(function(){if(j&&t<d){myFocus.opacity(a,Math[m](myFocus[st](++t,b,c,d)))}else if(!j&&t<d){a.style[e]=Math[m](myFocus[st](++t,b,c,d))+'px'}else{if(j&&f==0){a.style.display='none'}clearInterval(a[e+'Timer']);i&&i.call(a)}},10);return this},fadeIn:function(a,b,c){this.animate(a,'opacity',100,b==undefined?20:b,'linear',c);return this},fadeOut:function(a,b,c){this.animate(a,'opacity',0,b==undefined?20:b,'linear',c);return this},slide:function(a,b,c,d,e){for(var p in b)this.animate(a,p,b[p],c,d,e);return this},stop:function(a){for(var p in a)if(p.indexOf('Timer')!==-1)clearInterval(a[p]);return this},initCSS:function(p){var a=[],w=p.width,h=p.height||this.$(p.id).offsetHeight,oStyle=document.createElement('style');oStyle.type='text/css';if(p.wrap)this.wrap([this.$(p.id)],p.style+'_wrap');if(p.css!==false)a.push('.'+p.S+' *{margin:0;padding:0;border:0;list-style:none;}.'+p.S+'{position:relative;width:'+w+'px;height:'+p.height+'px;overflow:hidden;font:12px/1.5 Verdana,Geneva,sans-serif;background:#fff;}.'+p.S+' .loading{position:absolute;z-index:9999;width:100%;height:100%;color:#666;text-align:center;padding-top:'+0.3*h+'px;background:#fff url(http://nethd.zhongsou.com/wtimg/i_41956/28236-loading.gif) center '+0.4*h+'px no-repeat;}.'+p.S+' .pic{position:relative;width:'+w+'px;height:'+h+'px;overflow:hidden;}.'+p.S+' .txt li,.'+p.S+' .txt li span,.'+p.S+' .txt-bg{width:'+w+'px;height:'+p.txtHeight+'px!important;line-height:'+p.txtHeight+'px!important;overflow:hidden;}.'+p.S+' .txt li p a{display:inline;}');if(oStyle.styleSheet){oStyle.styleSheet.cssText=a.join('')}else{oStyle.innerHTML=a.join('')}var b=this.$$('head',document)[0];b.insertBefore(oStyle,b.firstChild)},removeClass:function(o,a){var b=o.className,reg="/\\s*"+a+"\\b/g";o.className=b?b.replace(eval(reg),''):''},alterSRC:function(o,a,b){var c=this.$$('img',o)[0];c.src=b?c.src.replace(eval("/"+a+"\\.(?=[^\\.]+$)/g"),'.'):c.src.replace(/\.(?=[^\.]+$)/g,a+'.')},setting:function(a,b){a.S=a.style+'-'+a.id;if(this[a.style]){for(var p in this[a.style])if(!a[p])a[p]=this[a.style][p]}if(b){myFocus.$(a.id).className+=' '+a.style+' '+a.S;myFocus.initCSS(a);myFocus[a.style](a);return}if(window.attachEvent){(function(){try{myFocus.$(a.id).className+=' '+a.style+' '+a.S;myFocus.initCSS(a)}catch(e){setTimeout(arguments.callee,0)}})();window.attachEvent('onload',function(){myFocus[a.style](a)})}　　else{document.addEventListener("DOMContentLoaded",function(){myFocus.$(a.id).className+=' '+a.style+' '+a.S;myFocus.initCSS(a)},false);window.addEventListener('load',function(){myFocus[a.style](a)},false)}},addList:function(a,b){var s=[],ul=this.$$('ul',a)[0],li=this.$$_('li',ul),img,n=li.length,num=b.length;for(var j=0;j<num;j++){s.push('<ul class='+b[j]+'>');for(var i=0;i<n;i++){img=this.$$('img',li[i])[0];s.push('<li>'+(b[j]=='num'?('<a>'+(i+1)+'</a>'):(b[j]=='txt'&&img?li[i].innerHTML.replace(/<img(.|\n|\r)*?(\>\<\/a\>)/i,img.alt+'</a>')+'<p>'+img.getAttribute("text")+'</p>':(b[j]=='thumb'&&img?'<img src='+(img.getAttribute("thumb")||img.src)+' />':'')))+'<span></span></li>')};s.push('</ul>')};a.innerHTML+=s.join('')},wrap:function(a,b){var c=document.createElement('div');c.className=b;a[0].parentNode.insertBefore(c,a[0]);for(var i=0;i<a.length;i++)c.appendChild(a[i])},wrapIn:function(a,b){a.innerHTML='<ul class='+b+'>'+a.innerHTML+'</ul>'},switchMF:function(a,b,c,d,e){return"var ld=this.$c('loading',box),less="+c+",_turn=true,_dir="+d+"||'left',_dis=_dir=='left'||_dir=='right'?par.width:par.height,pics="+e+"||pics,index=par.index||0,t=par.time*1000;if(less){pics.style[_dir]=-_dis*n+'px';index+=n;}if(ld)box.removeChild(ld);var run=function(idx){("+a+")(myFocus);var prev=index;if(less&&index==2*n-1&&_turn!=1){pics.style[_dir]=-(n-1)*_dis+'px';index=n-1}if(less&&index==0&&_turn!=2){pics.style[_dir]=-n*_dis+'px';index=n}if(!less&&index==n-1&&idx==undefined)index=-1;if(less&&idx!==undefined&&index>n-1&&!_turn) idx+=n;var next=idx!==undefined?idx:index+1;if("+b+")("+b+")(myFocus);index=next;_turn=false;};run(index);if(t&&par.auto!==false)var auto=setInterval(function(){run()},t);box.onmouseover=function(){if(auto)clearInterval(auto)};box.onmouseout=function(){if(auto)auto=setInterval(function(){run()},t)};"},bind:function(a,b,c){return"for (var j=0;j<n;j++){"+a+"[j].index=j;if("+b+"=='click'){"+a+"[j].onmouseover=function(){if(this.index!=index)this.className+=' hover'};"+a+"[j].onmouseout=function(){myFocus.removeClass(this,'hover')};"+a+"[j].onclick=function(){if(this.index!=index) {run(this.index);return false}};}else if("+b+"=='mouseover'){"+a+"[j].onmouseover=function(){var self=this;if("+c+"==0){if(self.index!=index){run(self.index);return false}}else "+a+".d=setTimeout(function(){if(self.index!=index) {run(self.index);return false}},"+(c==undefined?100:c)+")};"+a+"[j].onmouseout=function(){clearTimeout("+a+".d)};}else{alert('Error Setting : \"'+"+b+"+'\"');break;};for(var i=0,lk=this.$$('a',box),ln=lk.length;i<ln;i++) lk[i].onfocus=function(){this.blur();}}"},toggle:function(a,b,c){return"var _stop=false;"+a+".onclick=function(){this.className=this.className=='"+b+"'?'"+c+"':'"+b+"';if(!_stop){clearInterval(auto);auto=null;_stop=true;}else{auto=true;_stop=false;}}"},scroll:function(a,b,c,d,e){return"var scPar={},scDis="+c+",scN=Math.floor("+d+"/2),scDir=parseInt("+a+".style["+b+"])||0,scIdx=next>=n?next-n:next,scSpd="+e+"||30,scMax=scDis*(n-"+d+"),scD=scDis*scIdx+scDir;if(scD>scDis*scN&&scIdx!==n-1) scPar["+b+"]='-'+scDis;if(scD<scDis&&scIdx!==0) scPar["+b+"]='+'+scDis;if(scIdx===n-1) scPar["+b+"]=-scMax;if(scIdx===0) scPar["+b+"]=0;myFocus.slide("+a+",scPar,scSpd);"},turn:function(a,b){return a+".onclick=function(){_turn=1;run(index>0?index-1:n-1);};"+b+".onclick=function(){_turn=2;var tIdx=index>=2*n-1?n-1:index;run(index==n-1&&!less?0:tIdx+1);}"},extend:function(a){for(var p in a)this[p]=a[p]}};myFocus.setting.prototype={param:function(a,p){this[a]=p}};